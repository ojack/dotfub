<script type="module">

  import { Squirm, squirmActions } from './main.js'

  // console.log('importing', Squirm, squirmActions)
  const { loadFromFile, saveToFile, convertToString, cloneSquirm, addTick } = squirmActions

  // Testing
  const squirm = new Squirm()
  squirm.addTick({ t: 1, x: 100, y: 100 })

  const squirm2 = addTick(squirm, { t: 2, x: 200, y: 200 })

  squirm2.addTick({ t: 3, x: 300, y: 300 })

  squirm2.addTick({ t: 2.2, x: 400, y: 400 })


  console.log('first', squirm.data)
  console.log('second', squirm2.data)

  // console.log(squirm.convertToString())
  // console.log(convertToString(squirm2))
  // squirm.saveToFile()
  // squirm.saveToFile()

  const button = document.createElement('button')
  button.textContent = 'load squirm'
  button.onclick = () => {
    loadFromFile((err, data) => {
      if (err) {
        console.error(err);
      } else {
        // Process the data
        console.log(data)
      }
    })
  }
  document.body.appendChild(button)



  window.cloneSquirm = cloneSquirm
  window.Squirm = Squirm
  window.squirm2 = squirm2
  window.squirm = squirm
</script>

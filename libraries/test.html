<script type="module">

  import { Fubble, fubbleActions } from './main.js'

  // console.log('importing', Fubble, fubbleActions)
  const { loadFromFile, saveToFile, convertToString, cloneFubble, addTick } = fubbleActions

  // Testing
  const fubble = new Fubble()
  fubble.addTick({ t: 1, x: 100, y: 100 })

  const fubble2 = addTick(fubble, { t: 2, x: 200, y: 200 })

  fubble2.addTick({ t: 3, x: 300, y: 300 })

  fubble2.addTick({ t: 2.2, x: 400, y: 400 })


  console.log('first', fubble.data)
  console.log('second', fubble2.data)

  // console.log(fubble.convertToString())
  // console.log(convertToString(fubble2))
  // fubble.saveToFile()
  // fubble.saveToFile()

  const button = document.createElement('button')
  button.textContent = 'load fubble'
  button.onclick = () => {
    loadFromFile((err, data) => {
      if (err) {
        console.error(err);
      } else {
        // Process the data
        console.log(data)
      }
    })
  }
  document.body.appendChild(button)



  window.cloneFubble = cloneFubble
  window.Fubble = Fubble
  window.fubble2 = fubble2
  window.fubble = fubble
</script>

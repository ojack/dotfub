<script type="module">

  import { Squirm, squirmActions } from './main.js'

  console.log('importing', Squirm, squirmActions)
  const { cloneSquirm, addTick } = squirmActions

  // Testing 
  const squirm = new Squirm()
  squirm.addTick({ t: 1, x: 100, y: 100 })

  const squirm2 = addTick(squirm, { t: 2, x: 200, y: 200 })

  squirm2.addTick({ t: 3, x: 300, y: 300 })


  console.log('first', squirm)
  console.log('second', squirm2)


  
  window.cloneSquirm = cloneSquirm
  window.Squirm = Squirm
  // window.squirm = squirm
  // window.squirm2 = squirm2
//   //functional representation of actions on squimr
//   const addTickFunctional = (s) => (dataPoint) => {
//     // s.weird.push(data)
//     Object.keys(s.data).forEach(key => {
//       let newVal = dataPoint[key]
//       if(!key in dataPoint) {
//         // todo get last value here
//         console.warn(`missing data for ${key}, using last value instead`)
//       }
//       s.data[key].push(newVal)
//     })
//     return s
//   }

//   const cloneSquirm = (s) => {
//     const newSquirm = new Squirm()
//     newSquirm.data = JSON.parse(JSON.stringify(s.data))
//     newSquirm.metadata = Object.assign({}, s.metadata)
//     return newSquirm
//   }

//   const squirmActions = {
//     'cloneSquirm': cloneSquirm
//   }

//   const squirmActionsThatNeedCloning = {
//     'addTick': addTickFunctional
//   }

//   Object.entries(squirmActions).forEach(([name, action]) => {
//     // add as method to squirm class
//     Squirm.prototype[name] = function (data) {
//       return action(this)(data)
//     }
//   })

//   Object.entries(squirmActionsThatNeedCloning).forEach(([name, action]) => {
//     // add as method to squirm class
//     Squirm.prototype[name] = function (data) {
//       return action(this)(data)
//     }
//     // generate user-facing method
//   })


//   // export { Squirm, addTick = wrap(squirmActions.addTick) }



// ////
  

  

//   // functions and methods generated by computer
//   const addTick = (s, data) => {
//     const clone = cloneSquirm(s)
//     addTickFunctional(clone)(data)
//     console.log(s.data.x, clone.data.x)
//     return clone
//   }


 

//   // const addTick = (Squirm, data) => {
//   //   const myFunction = addTickFunctional(Squirm)
//   //   return myFunction(data)
//   // }

  


</script>